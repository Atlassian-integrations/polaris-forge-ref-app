modules:
  'polaris:objectProvider':
    - key: slack-object-provider
      function: slack-resolver
      domains: ["slack.com"]
      subdomain: true
      linkPattern: >-
        ^https:\/\/.+?\.slack\.com\/archives\/[C|G][A-Z0-9][^/]+\/p[\d]+$
      authType: "oauth2"
  externalAuth:
    - key: slack
      scopes: []
      displayName: Slack
      providerType: oauth2
      authorizationUrl: 'https://slack.com/oauth/v2/authorize'
      exchangeUrl: 'https://slack.com/api/oauth.v2.access'
      revokeTokenUrl: 'https://slack.com/api/auth.revoke'
      additionalParameters:
        user_scope: >-
          reactions:read,mpim:read,im:read,channels:read,users:read
      credentialsRetriever:
        resolvers:
          accessToken: 'authed_user.access_token'
      profileRetriever:
        type: url
        value: 'https://slack.com/api/auth.test'
        resolvers:
          id: user_id
          displayName: user
        authorization:
          location: queryString
          parameterName: token
  function:
    - key: slack-resolver
      handler: index.run
      externalAuth: slack
permissions:
  scopes: []
app:
  id: ari:cloud:ecosystem::app/e9d89f54-860c-4006-96b2-50333bba579b
  name: Polaris Forge ref app
